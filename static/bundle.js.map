{"version":3,"file":"bundle.js","sources":["webpack:///webpack/bootstrap 1671e2c8abe10d368f48","webpack:///./src/index.js","webpack:///./src/js/Game.js","webpack:///./~/.2.3.2@gl-matrix/src/gl-matrix/vec2.js","webpack:///./~/.2.3.2@gl-matrix/src/gl-matrix/common.js","webpack:///./src/js/Entity/Path.js","webpack:///./src/js/Entity/tower/BaseTower.js","webpack:///./src/js/Entity/bullet/CircleBullet.js","webpack:///./src/js/utils/utils.js","webpack:///./src/js/utils/config.js","webpack:///./src/js/utils/constant.js","webpack:///./src/js/id.js","webpack:///./src/js/Entity/tower/BulletTower.js","webpack:///./src/js/Entity/bullet/Bullet.js","webpack:///./src/js/Entity/Enemy.js","webpack:///./src/js/Entity/Map.js","webpack:///./src/js/Wave.js","webpack:///./src/js/Entity/GameControl.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1671e2c8abe10d368f48","'use strict';\n\nvar _Game = require('./js/Game');\n\nvar _Game2 = _interopRequireDefault(_Game);\n\nvar _GameControl = require('./js/Entity/GameControl');\n\nvar _GameControl2 = _interopRequireDefault(_GameControl);\n\nvar _constant = require('./js/utils/constant');\n\nvar _BaseTower = require('./js/Entity/tower/BaseTower');\n\nvar _BaseTower2 = _interopRequireDefault(_BaseTower);\n\nvar _BulletTower = require('./js/Entity/tower/BulletTower');\n\nvar _BulletTower2 = _interopRequireDefault(_BulletTower);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar game = new _Game2.default({\n    element: document.getElementById('drawing')\n});\n\nvar gameControlEle = document.getElementById('game-control-canvas');\nvar gameControl = new _GameControl2.default({\n    element: gameControlEle,\n    game: game\n});\ngameControl.draw();\n\nvar canvas = document.getElementById('drawing');\n\n// 在canvas上进行右键操作\ncanvas.oncontextmenu = function (e) {\n    game.mode = '';\n    e.preventDefault();\n};\n\ndocument.onmousemove = function (e) {\n    if (game.mode === 'ADD_TOWER') {\n        game.cursorX = e.pageX;\n        game.cursorY = e.pageY;\n        var rect = canvas.getBoundingClientRect();\n        var x = e.clientX - rect.left;\n        var y = e.clientY - rect.top;\n        game.coordX = Math.floor(x / _constant.gridWidth);\n        game.coordY = Math.floor(y / _constant.gridHeight);\n    }\n};\n\ndocument.onclick = function (e) {\n    var rect = canvas.getBoundingClientRect();\n\n    var x = e.clientX - rect.left;\n    var y = e.clientY - rect.top;\n\n    var coordX = Math.floor(x / _constant.gridWidth);\n    var coordY = Math.floor(y / _constant.gridHeight);\n\n    /* 只在地图范围内进行操作 */\n    if (0 <= coordX && coordX < _constant.gridNumX && 0 <= coordY && coordY < _constant.gridNumY) {\n        if (game.map.coord[coordX][coordY] === 'T') {\n            // 点击的格子内为塔\n            game.towers.map(function (tower, index) {\n                if (tower.coordX === coordX && tower.coordY === coordY) {\n                    console.log('You select ' + index + 'th tower');\n\n                    // 已经选中的塔再次点击则取消\n                    if (game.towerSelectIndex === index) {\n                        game.towerSelectIndex = -1;\n                        game.towerSelectId = -1;\n                        game.towerSelect = false;\n                    } else {\n                        game.towerSelectIndex = index;\n                        game.towerSelectId = tower.id;\n                        game.towerSelect = true;\n                    }\n                }\n            });\n        } else {\n            game.towerSelect = false;\n            game.towerSelectId = -1;\n            game.towerSelectIndex = -1;\n        }\n\n        if (game.mode === 'ADD_TOWER') {\n            game.createNewTower(coordX, coordY, game.addTowerType);\n        }\n    }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 1\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _vec = require('gl-matrix/src/gl-matrix/vec2');\n\nvar _vec2 = _interopRequireDefault(_vec);\n\nvar _Path = require('./Entity/Path.js');\n\nvar _Path2 = _interopRequireDefault(_Path);\n\nvar _BaseTower = require('./Entity/tower/BaseTower.js');\n\nvar _BaseTower2 = _interopRequireDefault(_BaseTower);\n\nvar _BulletTower = require('./Entity/tower/BulletTower.js');\n\nvar _BulletTower2 = _interopRequireDefault(_BulletTower);\n\nvar _Enemy = require('./Entity/Enemy');\n\nvar _Enemy2 = _interopRequireDefault(_Enemy);\n\nvar _Map = require('./Entity/Map');\n\nvar _Map2 = _interopRequireDefault(_Map);\n\nvar _Wave = require('./Wave');\n\nvar _Wave2 = _interopRequireDefault(_Wave);\n\nvar _utils = require('./utils/utils');\n\nvar _constant = require('./utils/constant');\n\nvar _id = require('./id');\n\nvar _id2 = _interopRequireDefault(_id);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar WIDTH = 800;\nvar HEIGHT = 640;\nvar canvas = document.getElementById(\"drawing\");\nvar ctx = canvas.getContext(\"2d\");\n\nvar gameOverEle = document.getElementById('game-over');\n\nvar Game = function () {\n    function Game(opt) {\n        _classCallCheck(this, Game);\n\n        // Init\n        canvas.width = WIDTH;\n        canvas.height = HEIGHT;\n        this.element = opt.element;\n\n        this.genId = 0;\n\n        this.bullets = [];\n        this.towers = [];\n        this.enemies = [];\n\n        this.ctx = ctx;\n        this.money = 5000;\n        this.coordX = 0;\n        this.coordY = 0;\n        this.enemyCreatedCount = 0; // 目前已经创建的enemy的总数\n        this.lastCreatedEnemyTime = new Date();\n\n        this.pathCoord = [[0, 0], [18, 0], [18, 4], [10, 4], [10, 10], [16, 10], [16, 14], [-1, 14]];\n\n        var newTowerCoord = [8, 3];\n        this.map = new _Map2.default({\n            ctx: ctx,\n            WIDTH: WIDTH,\n            HEIGHT: HEIGHT,\n            newTowerCoord: newTowerCoord,\n            pathCoord: this.pathCoord\n        });\n\n        // 放置一个初始状态下的塔\n        var tower = new _BaseTower2.default({\n            ctx: ctx,\n            x: _constant.gridWidth / 2 + newTowerCoord[0] * _constant.gridWidth,\n            y: _constant.gridHeight / 2 + newTowerCoord[1] * _constant.gridHeight,\n            bullets: this.bullets\n        });\n        this.towers.push(tower);\n\n        this.mode = '';\n        this.addTowerType = 'BASE';\n        this.score = 0;\n        this.life = 100;\n\n        // 当前是否选中塔\n        this.towerSelect = false;\n        this.towerSelectIndex = -1;\n        this.towerSelectId = -1;\n\n        this.status = 'running';\n\n        this.wave = -1; // 当前第几波\n        this.waves = [];\n\n        this.draw();\n        this.bindEvent();\n    }\n\n    // Specify what to draw\n\n\n    _createClass(Game, [{\n        key: 'draw',\n        value: function draw() {\n            var _this = this;\n\n            if (this.status === 'gameOver') {\n                // gameOverEle.style.display = 'block';\n                return;\n            }\n\n            if (this.status === 'pause') {\n                return;\n            }\n\n            this.map.draw({\n                towers: this.towers,\n                towerSelect: this.towerSelect,\n                towerSelectIndex: this.towerSelectIndex\n            });\n\n            if (this.waves.length === 0 || this.waves[this.wave].waveFinish()) {\n                this.generateWave();\n                // this.waves[0].waveFinish();\n            }\n\n            // 生成enemy\n            // 总数小于50，且间隔 x ms以上\n            if (this.wave < 100 && new Date() - this.lastCreatedEnemyTime > 500) {\n                var cfg = this.waves[this.wave].generateEnemy();\n                var enemy = new _Enemy2.default({\n                    id: _id2.default.genId(),\n                    ctx: ctx,\n                    x: _constant.gridWidth / 2 + (Math.random() - 0.5) * 10,\n                    y: _constant.gridHeight / 2 + (Math.random() - 0.5) * 10,\n                    color: cfg.color,\n                    radius: cfg.radius,\n                    speed: cfg.speed,\n                    health: cfg.health * (1 + this.wave / 10)\n                });\n\n                this.enemies.push(enemy);\n                this.enemyCreatedCount++;\n                this.lastCreatedEnemyTime = new Date();\n            }\n\n            // 对每一个enemy进行step操作，并绘制\n            this.enemies.forEach(function (enemy, index) {\n                enemy.step({ path: _this.pathCoord });\n                enemy.draw();\n\n                if (enemy.dead) {\n                    if (enemy.reachDest) {\n                        _this.life -= enemy.damage;\n                    }\n                    _this.enemies.remove(index);\n                }\n            });\n\n            // Draw our tower\n            this.towers.forEach(function (tower, index) {\n                if (_this.towerSelect && _this.towerSelectIndex === index) {\n                    // 选中的塔需画出其范围\n                    tower.selected = true;\n                } else {\n                    tower.selected = false;\n                }\n                tower.draw(ctx);\n            });\n\n            // 如何确定游戏结束?\n            if (this.enemyCreatedCount > 0 && this.enemies.length === 0) {\n                setTimeout(function () {\n                    _this.status = 'gameOver';\n                }, 1000);\n            }\n\n            // 确定 bullet tower 的目标\n            for (var i = 0, len = this.towers.length; i < len; i++) {\n                var tower = this.towers[i];\n                tower.findTarget(this.enemies);\n                if (tower.target !== null) {\n                    var target = tower.target;\n                    // 调整其朝向\n                    tower.directionVec = _vec2.default.fromValues(target.x - tower.x, target.y - tower.y);\n\n                    tower.direction = Math.atan2(target.y - tower.y, target.x - tower.x) * (180 / Math.PI);\n                }\n            }\n\n            // 检查bullet是否与enemy相撞\n            this.detectImpact();\n\n            // 移除出界的bullet，画出剩下的bullet\n            for (var _i = 0; _i < this.bullets.length; _i++) {\n                var bullet = this.bullets[_i];\n                if (bullet.type === 'line') {\n                    // 直线子弹\n                    if (bullet.start[0] < 0 || bullet.start[1] < 0 || bullet.start[0] > WIDTH || bullet.start[1] > HEIGHT) {\n                        this.bullets.remove(_i);\n                        _i--;\n                    } else {\n                        bullet.draw(ctx, this.enemies);\n                    }\n                } else if (bullet.type === 'circle') {\n                    if (bullet.x < 0 || bullet.y < 0 || bullet.x > WIDTH || bullet.y > HEIGHT) {\n                        this.bullets.remove(_i);\n                        _i--;\n                    } else {\n                        bullet.draw(ctx, this.enemies);\n                    }\n                }\n            }\n\n            if (this.mode === 'ADD_TOWER') {\n                // 添加塔模式\n                if (0 <= this.coordX && this.coordX < _constant.gridNumX && 0 <= this.coordY && this.coordY < _constant.gridNumY) {\n                    if (this.map.coord[this.coordX][this.coordY] !== 'T') {\n                        // 该位置没有塔\n                        this.drawGhostTower(ctx, this.coordX * _constant.gridWidth + _constant.gridWidth / 2, this.coordY * _constant.gridHeight + _constant.gridHeight / 2, this.addTowerType);\n                    }\n                }\n            }\n\n            this.displayInfo();\n\n            requestAnimationFrame(function () {\n                return _this.draw();\n            }, 100);\n        }\n\n        // 循环检测bullet是否和vehicle碰撞\n\n    }, {\n        key: 'detectImpact',\n        value: function detectImpact() {\n            for (var i = 0; i < this.bullets.length; i++) {\n                var impact = false;\n                var distance = 0;\n\n                for (var j = 0; j < this.enemies.length; j++) {\n\n                    if (this.bullets[i].type === 'line') {\n                        // 求圆心至bullet的垂足\n                        var normal = _vec2.default.create();\n                        var bVec = this.bullets[i].directionVec;\n                        var aDotB = 1;\n\n                        var aVec = _vec2.default.fromValues(this.enemies[j].x - this.bullets[i].start[0], this.enemies[j].y - this.bullets[i].start[1]);\n                        _vec2.default.multiply(aDotB, aVec, bVec);\n                        _vec2.default.scale(bVec, bVec, aDotB);\n                        _vec2.default.add(normal, this.bullets[i].start, bVec);\n\n                        distance = (0, _utils.calcuteDistance)(normal[0], normal[1], this.enemies[j].x, this.enemies[j].y);\n                    } else {\n                        distance = (0, _utils.calcuteDistance)(this.bullets[i].x, this.bullets[i].y, this.enemies[j].x, this.enemies[j].y);\n                    }\n\n                    if (distance <= this.enemies[j].radius + 2) {\n                        impact = true;\n                        this.enemies[j].health -= this.bullets[i].damage;\n                        if (this.enemies[j].health <= 0) {\n                            this.money += this.enemies[j].value;\n                            this.enemies.remove(j);j--;\n                            this.score += 100;\n                        }\n                        break;\n                    }\n                }\n                if (impact) {\n                    this.bullets.remove(i);i--;\n                }\n            }\n        }\n\n        /**\r\n         * 创建一个新的tower\r\n         * @param {Number} coordX x轴的坐标  \r\n         * @param {Number} coordY y轴的坐标\r\n         */\n\n    }, {\n        key: 'createNewTower',\n        value: function createNewTower(coordX, coordY, towerType) {\n\n            // 检查当前位置是否已有物体\n            if (this.map.coord[coordX][coordY] === 'T') {\n                console.log('You can not place tower here!');\n                return -1;\n            }\n\n            var cost = _constant.towerCost.baseTower;\n            // 检查是否有足够金钱\n            if (this.money - cost < 0) {\n                console.log('You do not have enough money.');\n                return -1;\n            }\n\n            var x = coordX * _constant.gridWidth + _constant.gridWidth / 2;\n            var y = coordY * _constant.gridWidth + _constant.gridWidth / 2;\n\n            var tower = null;\n            switch (towerType) {\n                case 'BASE':\n                    tower = new _BaseTower2.default({ ctx: ctx, x: x, y: y, bullets: this.bullets });\n                    break;\n                case 'BULLET':\n                    tower = new _BulletTower2.default({ ctx: ctx, x: x, y: y, bullets: this.bullets });\n                    break;\n                default:\n                    tower = new _BulletTower2.default({ ctx: ctx, x: x, y: y, bullets: this.bullets });\n            }\n\n            this.map.coord[coordX][coordY] = 'T';\n            this.money -= cost;\n            this.towers.push(tower);\n        }\n    }, {\n        key: 'sellTower',\n        value: function sellTower() {\n            var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.towerSelectIndex;\n\n            var coordX = this.towers[index].coordX;\n            var coordY = this.towers[index].coordY;\n            this.towers.remove(index);\n            console.log(index);\n            this.map.coord[coordX][coordY] = '';\n\n            this.money += 400;\n            this.towerSelect = false;\n            this.towerSelectIndex = -1;\n        }\n\n        // 准备放置塔时，在鼠标所在位置画一个虚拟的塔\n\n    }, {\n        key: 'drawGhostTower',\n        value: function drawGhostTower(ctx, x, y, towerType) {\n            var tower = null;\n            if (towerType === 'BASE') {\n                tower = new _BaseTower2.default({ ctx: ctx, x: x, y: y, bullets: this.bullets, selected: true });\n            } else if (towerType === 'BULLET') {\n                tower = new _BulletTower2.default({ ctx: ctx, x: x, y: y, bullets: this.bullets, selected: true });\n            }\n            tower.draw(ctx);\n        }\n    }, {\n        key: 'displayInfo',\n        value: function displayInfo() {\n            // 画面信息的显示\n            if (document.getElementById('enemyCount')) {\n                document.getElementById('enemyCount').innerHTML = 'Enemy Count: ' + this.enemies.length + ', Bullets: ' + this.bullets.length;\n            }\n        }\n    }, {\n        key: 'bindEvent',\n        value: function bindEvent() {\n            var element = this.element;\n            // console.log(element);\n        }\n    }, {\n        key: 'generateWave',\n        value: function generateWave() {\n            this.waves.push(new _Wave2.default());\n            this.wave++;\n        }\n    }]);\n\n    return Game;\n}();\n\nexports.default = Game;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Game.js\n// module id = 2\n// module chunks = 0","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\nvar glMatrix = require(\"./common.js\");\n\n/**\n * @class 2 Dimensional Vector\n * @name vec2\n */\nvar vec2 = {};\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nvec2.create = function() {\n    var out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = 0;\n    out[1] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {vec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nvec2.clone = function(a) {\n    var out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n};\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nvec2.fromValues = function(x, y) {\n    var out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = x;\n    out[1] = y;\n    return out;\n};\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nvec2.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n};\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nvec2.set = function(out, x, y) {\n    out[0] = x;\n    out[1] = y;\n    return out;\n};\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nvec2.sub = vec2.subtract;\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nvec2.mul = vec2.multiply;\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nvec2.div = vec2.divide;\n\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to ceil\n * @returns {vec2} out\n */\nvec2.ceil = function (out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    return out;\n};\n\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to floor\n * @returns {vec2} out\n */\nvec2.floor = function (out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    return out;\n};\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    return out;\n};\n\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to round\n * @returns {vec2} out\n */\nvec2.round = function (out, a) {\n    out[0] = Math.round(a[0]);\n    out[1] = Math.round(a[1]);\n    return out;\n};\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nvec2.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    return out;\n};\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nvec2.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nvec2.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nvec2.dist = vec2.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec2.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return x*x + y*y;\n};\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nvec2.sqrDist = vec2.squaredDistance;\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec2.length = function (a) {\n    var x = a[0],\n        y = a[1];\n    return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nvec2.len = vec2.length;\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec2.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1];\n    return x*x + y*y;\n};\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nvec2.sqrLen = vec2.squaredLength;\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nvec2.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nvec2.inverse = function(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n};\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nvec2.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1];\n    var len = x*x + y*y;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec2.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n};\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec3} out\n */\nvec2.cross = function(out, a, b) {\n    var z = a[0] * b[1] - a[1] * b[0];\n    out[0] = out[1] = 0;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec2} out\n */\nvec2.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nvec2.random = function (out, scale) {\n    scale = scale || 1.0;\n    var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n    out[0] = Math.cos(r) * scale;\n    out[1] = Math.sin(r) * scale;\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat2 = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat2d = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat3 = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat4 = function(out, a, m) {\n    var x = a[0], \n        y = a[1];\n    out[0] = m[0] * x + m[4] * y + m[12];\n    out[1] = m[1] * x + m[5] * y + m[13];\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec2.forEach = (function() {\n    var vec = vec2.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 2;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n        \n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1];\n        }\n        \n        return a;\n    };\n})();\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec2} vec vector to represent as a string\n * @returns {String} string representation of the vector\n */\nvec2.str = function (a) {\n    return 'vec2(' + a[0] + ', ' + a[1] + ')';\n};\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nvec2.exactEquals = function (a, b) {\n    return a[0] === b[0] && a[1] === b[1];\n};\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec2} a The first vector.\n * @param {vec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nvec2.equals = function (a, b) {\n    var a0 = a[0], a1 = a[1];\n    var b0 = b[0], b1 = b[1];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n            Math.abs(a1 - b1) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a1), Math.abs(b1)));\n};\n\nmodule.exports = vec2;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.2.3.2@gl-matrix/src/gl-matrix/vec2.js\n// module id = 3\n// module chunks = 0","/* Copyright (c) 2015, Brandon Jones, Colin MacKenzie IV.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE. */\n\n/**\n * @class Common utilities\n * @name glMatrix\n */\nvar glMatrix = {};\n\n// Configuration Constants\nglMatrix.EPSILON = 0.000001;\nglMatrix.ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\nglMatrix.RANDOM = Math.random;\nglMatrix.ENABLE_SIMD = false;\n\n// Capability detection\nglMatrix.SIMD_AVAILABLE = (glMatrix.ARRAY_TYPE === Float32Array) && ('SIMD' in this);\nglMatrix.USE_SIMD = glMatrix.ENABLE_SIMD && glMatrix.SIMD_AVAILABLE;\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Type} type Array type, such as Float32Array or Array\n */\nglMatrix.setMatrixArrayType = function(type) {\n    glMatrix.ARRAY_TYPE = type;\n}\n\nvar degree = Math.PI / 180;\n\n/**\n* Convert Degree To Radian\n*\n* @param {Number} Angle in Degrees\n*/\nglMatrix.toRadian = function(a){\n     return a * degree;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less \n * than or equal to 1.0, and a relative tolerance is used for larger values)\n * \n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nglMatrix.equals = function(a, b) {\n\treturn Math.abs(a - b) <= glMatrix.EPSILON*Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n\nmodule.exports = glMatrix;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.2.3.2@gl-matrix/src/gl-matrix/common.js\n// module id = 4\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Path = function () {\n    function Path(opt) {\n        _classCallCheck(this, Path);\n\n        this.ctx = opt.ctx;\n        this.radius = opt.radius;\n        this.pathCoord = opt.pathCoord;\n        this.points = [];\n\n        /**\r\n         * Add a point to path\r\n         */\n        this.addPoint = function (x, y) {\n            this.points.push([x, y]);\n        };\n\n        // Define path points\n        this.setPoints = function () {\n            for (var i = 0, len = this.pathCoord.length; i < len; i++) {\n                var coord = this.pathCoord[i];\n                this.addPoint(40 * coord[0] + 20, 40 * coord[1] + 20);\n            }\n        };\n    }\n\n    /**\r\n     * Render path\r\n     */\n\n\n    _createClass(Path, [{\n        key: 'draw',\n        value: function draw() {\n            var ctx = this.ctx;\n            ctx.save();\n\n            ctx.beginPath();\n            ctx.lineJoin = 'round';\n            ctx.strokeStyle = '#333';\n            ctx.lineWidth = this.radius * 2;\n            ctx.shadowBlur = 0;\n\n            for (var i = 0; i < this.points.length; i++) {\n                ctx.lineTo(this.points[i][0], this.points[i][1]);\n            }\n            ctx.stroke();\n\n            ctx.beginPath();\n            ctx.lineWidth = 1;\n            ctx.fillStyle = '#555';\n            ctx.arc(this.points[0][0], this.points[0][1], this.radius, 0.5 * Math.PI, 1.5 * Math.PI, false);\n            ctx.fill();\n\n            // Draw a line in the middle of the path\n            ctx.strokeStyle = '#111';\n            ctx.lineWidth = 1;\n            ctx.beginPath();\n            for (var _i = 0; _i < this.points.length; _i++) {\n                ctx.lineTo(this.points[_i][0], this.points[_i][1]);\n            }\n            // ctx.closePath();\n            ctx.stroke();\n\n            ctx.restore();\n        }\n    }]);\n\n    return Path;\n}();\n\n;\n\nexports.default = Path;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Entity/Path.js\n// module id = 5\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * 用于发射圆形子弹的塔\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _CircleBullet = require('./../bullet/CircleBullet');\n\nvar _CircleBullet2 = _interopRequireDefault(_CircleBullet);\n\nvar _vec = require('gl-matrix/src/gl-matrix/vec2');\n\nvar _vec2 = _interopRequireDefault(_vec);\n\nvar _utils = require('./../../utils/utils');\n\nvar _config = require('./../../utils/config');\n\nvar _constant = require('./../../utils/constant');\n\nvar _id = require('./../../id');\n\nvar _id2 = _interopRequireDefault(_id);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BaseTower = function () {\n    function BaseTower(_ref) {\n        var ctx = _ref.ctx,\n            x = _ref.x,\n            y = _ref.y,\n            bullets = _ref.bullets,\n            selected = _ref.selected,\n            damage = _ref.damage,\n            radius = _ref.radius;\n\n        _classCallCheck(this, BaseTower);\n\n        this.x = x;\n        this.y = y;\n        this.ctx = ctx;\n        this.coordX = Math.floor((x - _constant.gridWidth / 2) / _constant.gridWidth);\n        this.coordY = Math.floor((y - _constant.gridHeight / 2) / _constant.gridHeight);\n        this.radius = radius || 12;\n        this.hue = 200;\n        this.bullets = bullets;\n        this.cost = _constant.towerCost.baseTower;\n        this.lastShootTime = new Date();\n        this.shootInterval = 500; // 发射间隔，单位ms\n        this.direction = 180; // 用度数表示的tower指向\n        this.bulletStartPosVec = _vec2.default.fromValues(0, 0);\n        this.directionVec = _vec2.default.create();\n        this.targetIndex = -1;\n        this.target = null;\n        this.targetId = -1;\n        this.range = 4 * _constant.gridWidth;\n        this.selected = selected || false;\n        this.damage = damage || 5;\n    }\n\n    _createClass(BaseTower, [{\n        key: 'step',\n        value: function step() {\n            // 将方向向量归一化\n            this.directionVec = _vec2.default.fromValues(Math.cos((0, _utils.toRadians)(this.direction)), Math.sin((0, _utils.toRadians)(this.direction)));\n            _vec2.default.normalize(this.directionVec, this.directionVec);\n\n            // bullet 出射位置\n            _vec2.default.scale(this.bulletStartPosVec, this.directionVec, this.radius * 2.5);\n\n            if (new Date() - this.lastShootTime >= this.shootInterval) {\n                this.shoot();\n                this.lastShootTime = new Date();\n            }\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            this.step();\n            var ctx = this.ctx;\n\n            ctx.save();\n            if (_config.config.renderShadow) {\n                ctx.shadowBlur = this.radius;\n                ctx.shadowColor = 'hsl(' + this.hue + ',100%,60%)';\n            }\n\n            // 在选中的情况下，画出其射程范围\n            if (this.selected) {\n                ctx.beginPath();\n                ctx.fillStyle = \"rgba(200, 200, 200, 0.3)\";\n                ctx.arc(this.x, this.y, this.range, 0, 2 * Math.PI);\n                ctx.fill();\n            }\n\n            ctx.strokeStyle = 'hsl(' + this.hue + ',100%, 40%';\n            ctx.fillStyle = 'hsl(' + this.hue + ',100%, 40%';\n            ctx.lineWidth = Math.max(3, this.radius / 8);\n\n            ctx.beginPath();\n            ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n            ctx.closePath();\n            // ctx.stroke();\n            ctx.fill();\n\n            ctx.beginPath();\n            ctx.moveTo(this.x, this.y);\n            ctx.lineTo(this.x + this.bulletStartPosVec[0], this.y + this.bulletStartPosVec[1]);\n            ctx.stroke();\n            ctx.closePath();\n\n            // this.direction = (this.direction + 0.6) % 360;\n\n            ctx.restore();\n        }\n    }, {\n        key: 'shoot',\n\n\n        // 发射子弹\n        value: function shoot() {\n            if (this.target) {\n                this.bullets.push(new _CircleBullet2.default({\n                    id: _id2.default.genId(),\n                    target: this.target,\n                    ctx: this.ctx,\n                    x: this.x + this.bulletStartPosVec[0],\n                    y: this.y + this.bulletStartPosVec[1],\n                    range: this.range,\n                    damage: this.damage\n                }));\n            }\n        }\n    }, {\n        key: 'findTarget',\n        value: function findTarget(enemies) {\n            // 先判断原有的target是否仍在范围内\n            if (this.target !== null) {\n                var prevTgt = enemies.getEle(this.target);\n                if (prevTgt) {\n                    if ((0, _utils.calcuteDistance)(prevTgt.x, prevTgt.y, this.x, this.y) < this.range) {\n                        return;\n                    }\n                }\n            }\n\n            // 去寻找一个新的target\n            this.targetIndex = -1;\n            this.targetId = -1;\n            this.target = null;\n\n            for (var i = 0, len = enemies.length; i < len; i++) {\n                var enemy = enemies[i];\n                if (Math.abs(enemy.x - this.x) + Math.abs(enemy.y - this.y) > this.range) {\n                    // 简化计算\n                    continue;\n                } else {\n                    if ((0, _utils.calcuteDistance)(enemy.x, enemy.y, this.x, this.y) < this.range) {\n                        if (this.target) this.target.color = 0;\n                        this.targetIndex = i;\n                        this.target = enemies[i];\n                        this.targetId = enemies[i].id;\n                        break;\n                    }\n                }\n            }\n\n            if (this.targetIndex !== -1) {\n                var target = enemies.getEleById(this.targetId);\n                if (target) {\n                    this.directionVec = _vec2.default.fromValues(target.x - this.x, target.y - this.y);\n                    this.direction = Math.atan2(target.y - this.y, target.x - this.x) * (180 / Math.PI);\n\n                    // target.color = 'red';\n                }\n                return target;\n            }\n        }\n    }]);\n\n    return BaseTower;\n}();\n\nexports.default = BaseTower;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Entity/tower/BaseTower.js\n// module id = 6\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _vec = require('gl-matrix/src/gl-matrix/vec2');\n\nvar _vec2 = _interopRequireDefault(_vec);\n\nvar _utils = require('./../../utils/utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Bullet1 = function () {\n    function Bullet1(_ref) {\n        var ctx = _ref.ctx,\n            x = _ref.x,\n            y = _ref.y,\n            target = _ref.target,\n            range = _ref.range,\n            damage = _ref.damage;\n\n        _classCallCheck(this, Bullet1);\n\n        this.type = 'circle';\n        this.x = x;\n        this.y = y;\n        this.ctx = ctx;\n        this.target = target;\n        this.radius = 3;\n        this.speed = 8;\n        this.vx = 0;\n        this.vy = 0;\n        this.angle = 0;\n        this.hue = 200;\n        this.range = range;\n        this.damage = damage || 5;\n    }\n\n    _createClass(Bullet1, [{\n        key: 'step',\n        value: function step(enemies) {\n            // 计算新位置\n\n            if (this.target) {\n                var target = enemies.getEleById(this.target.id);\n                if (target) {\n                    var curDis = (0, _utils.calcuteDistance)(target.x, target.y, this.x, this.y);\n                    if (curDis < this.range) {\n                        var dx = target.x - this.x;\n                        var dy = target.y - this.y;\n                        this.angle = Math.atan2(dy, dx);\n                    }\n                }\n            }\n            this.vx = Math.cos(this.angle) * this.speed;\n            this.vy = Math.sin(this.angle) * this.speed;\n\n            this.x += this.vx;\n            this.y += this.vy;\n        }\n    }, {\n        key: 'draw',\n        value: function draw(ctx, enemies) {\n            this.step(enemies);\n\n            // 绘图开始\n            ctx.save();\n            ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, 40%)';\n            ctx.beginPath();\n            ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n            ctx.stroke();\n            ctx.restore();\n        }\n    }]);\n\n    return Bullet1;\n}();\n\nexports.default = Bullet1;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Entity/bullet/CircleBullet.js\n// module id = 7\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.toRadians = toRadians;\nexports.calcuteDistance = calcuteDistance;\nexports.isInside = isInside;\n\nvar _vec = require('gl-matrix/src/gl-matrix/vec2');\n\nvar _vec2 = _interopRequireDefault(_vec);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction toRadians(angle) {\n    return angle * (Math.PI / 180);\n}\n\n// Array Remove - By John Resig (MIT Licensed)\nArray.prototype.remove = function (from, to) {\n    var rest = this.slice((to || from) + 1 || this.length);\n    this.length = from < 0 ? this.length + from : from;\n    return this.push.apply(this, rest);\n};\n\n// 根据id删除元素\nArray.prototype.removeById = function (id) {};\n\nArray.prototype.getEleById = function (id) {\n    var result = null;\n    this.forEach(function (ele, i) {\n        if (ele.id === id) {\n            result = ele;\n        }\n    });\n    return result;\n};\n\nArray.prototype.getEle = function (ele) {\n    for (var i = 0; i < this.length; i++) {\n        if (this[i] === ele) {\n            return ele;\n        }\n    }\n    return null;\n};\n\nfunction calcuteDistance(x1, y1, x2, y2) {\n    var result = Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n    return result;\n}\n\n// Make sure v is smaller than high\n_vec2.default.limit = function (out, v, high) {\n    'use strict';\n\n    var x = v[0],\n        y = v[1];\n\n    var len = x * x + y * y;\n\n    if (len > high * high && len > 0) {\n        out[0] = x;\n        out[1] = y;\n        _vec2.default.normalize(out, out);\n        _vec2.default.scale(out, out, high);\n    }\n    return out;\n};\n\nfunction isInside(pos, rect) {\n    return pos.x > rect.x && pos.x < rect.x + rect.width && pos.y < rect.y + rect.height && pos.y > rect.y;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/utils/utils.js\n// module id = 8\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar config = exports.config = {\n    renderShadow: false\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/utils/config.js\n// module id = 9\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar gridWidth = exports.gridWidth = 40;\nvar gridHeight = exports.gridHeight = gridWidth;\nvar gridSize = exports.gridSize = 40;\nvar gridNumX = exports.gridNumX = 20; // x轴方向上的格子数目\nvar gridNumY = exports.gridNumY = 16; // y轴方向上的格子数目\n\nvar towerCost = exports.towerCost = {\n    'baseTower': 200,\n    'bulletTower': 200\n};\n\nvar towerDataURL = exports.towerDataURL = {\n    'base': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAACmUlEQVRoQ+2XP2gTcRTHPy+pfwd1K9gugmAmJfWyuLhpB6GCCMVB1Em3Ts0FpdUhTSKCoy4KHXRRwU7azVHJRRQHKS4KUl11UIN4T661GqFJ7/dyp6XcTYG87/e97/d79/sjbJBHNogOMiHrLckskSyRlBzIXq2UjDXTZomYrUsJmCWSkrFm2uQTaTT3oTKKcgS0gMjgr+k+oiygzDOQf8Rk8Y156lWAyQlpvBwm/F4BPYfI1p5Dqn5DuIVsrlM+8D4JQckImWkdQ8I7iOxwGkr1M8Jp/NKcEy7xRFSFejCNyBSYT9IKTFE+WEUk+m16+kuk1jyByH1T506QEgLjVLx7Vi67kGprP/nwKcg2a/O/cfqV3MAhJosvLHx2IfXgITBmadoDM4fvHbdw2oRUXw2Sb3/o47voNqvygyEuehG302MTUgvOI9xw6hS3WLlAxbsZt3ylziik+QSRw67NYtbP43ujMWt/lwm15mVXECI+sMUZFw/wCd/bFa/0T1W0D5jXbtdmMevb+F7vk8EqROtRiDERy6sFE4jsjOmwY5ku4JcKjiDjsSKdPWRldtNeYlu1Gq0JVK+7uhar/p8uvzNBgRyvYw3mWqT5PVSKb11htkSiLvXgMXDUteEa9abXKuK0C1lOJTrgJbWftJFNe60XLbuQyIZG6yyqtxNJRThD2Zu1cvUnJOoaLd8i09YBlnCqV6iU3E8YHU37F7L0vTTHULmLsN1JkPIF0VP//6rbOXXj+W7C8BrC+JrfXnQjFJ1F8pcojyw6ie9SnEwineRXgxFCToKWgGFUhpb/1kVE3gHPyOUfWG+C3UQnLyQJew0cmRCDaalCskRStddAniViMC1VSJZIqvYayLNEDKalCskSSdVeA/lPe7ybM8uL3icAAAAASUVORK5CYII=',\n    'bullet': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAACdElEQVRoQ+2YUU7jMBCG/8kJepPlBlskklfYEwAvm3KKLacofaLcILy2D7Q34CbLM6DMynFM02ylxGMPQsh+aSN5nPnmn7HHIXyTQd+EAwnkqymZFEmKKEUgpZZSYMXLJkXEoVMyVFHkie8nb3j7QagnAJ1Y3/mZkb0U9HunwRIVZM2LK0J2DuBiwNmKgOqMyodYUFFANryYAvQHoCnA4NY7szi3XZD9b57o4xfgLcC3Od1sQ4GCQVoV7tv0AUa2bwbWvZxRXxd0swqBCQJZ83JFwGVTAW20fZyxNmY0Kq0Kml372HfnikEOlZC+3tlZfUKUEYHYmsieQt3f23f1rE8lNSMCWfNyS8BPk1Bja2IY+mMr2OY0Ox2efzjDG2SfUjEhwlPMG2TDdxVA5qxQGW21POY0GzqLDt7vBWJO7He8/o2bUv14WJScSi/fvCa7ItdIqv/l9St62vByPj5H+EQzrXrnwq8zKquxvhkQ11GMtVGd19mIb3MqRwf5y4F0ouQNMpoa+IzUshVIgF9q+eTJ/kTXLHe3tmex+4CYufo19QnbrwW5qxh07rVve0Wr2Xt0D0Tzhrhd7/HDUNIFiwJrmka0TWNTlhHG/vaIXUHl1HdJkRfx2/iu235F7ixFIFopJkmpYBAL4666Iduxux3ioaDyyjelooD0lRl/bz8ED1EiGojdkhdTRja3t0Y3+i2c/SBkhv0o1DztCPVccrXtKyeukWMpYLdmuhjukPmRwVXoJ6CuD1FBugsblQjZhIHmkykBz4z6JUb0jwVRDURatFK7BCKNnJZdUkQrstJ1kyLSyGnZJUW0IitdNykijZyW3T96vecztfd3vwAAAABJRU5ErkJggg=='\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/utils/constant.js\n// module id = 10\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar globalId = function () {\n    function globalId() {\n        _classCallCheck(this, globalId);\n\n        this.value = [];\n    }\n\n    _createClass(globalId, [{\n        key: \"genId\",\n        value: function genId() {\n            if (this.getLength() === 0) {\n                this.value.push(0);\n                return 0;\n            } else {\n                var id = this.value[this.getLength() - 1] + 1;\n                this.value.push(id);\n                return id;\n            }\n        }\n    }, {\n        key: \"getLength\",\n        value: function getLength() {\n            return this.value.length;\n        }\n    }]);\n\n    return globalId;\n}();\n\nexports.default = new globalId();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/id.js\n// module id = 11\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _BaseTower2 = require('./BaseTower');\n\nvar _BaseTower3 = _interopRequireDefault(_BaseTower2);\n\nvar _Bullet = require('./../bullet/Bullet');\n\nvar _Bullet2 = _interopRequireDefault(_Bullet);\n\nvar _vec = require('gl-matrix/src/gl-matrix/vec2');\n\nvar _vec2 = _interopRequireDefault(_vec);\n\nvar _utils = require('./../../utils/utils');\n\nvar _config = require('./../../utils/config');\n\nvar _constant = require('./../../utils/constant');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BulletTower = function (_BaseTower) {\n    _inherits(BulletTower, _BaseTower);\n\n    function BulletTower(opt) {\n        _classCallCheck(this, BulletTower);\n\n        var ctx = opt.ctx,\n            x = opt.x,\n            y = opt.y,\n            bullets = opt.bullets,\n            selected = opt.selected,\n            damage = opt.damage;\n\n        var _this = _possibleConstructorReturn(this, (BulletTower.__proto__ || Object.getPrototypeOf(BulletTower)).call(this, opt));\n\n        _this.hue = 100;\n        _this.cost = _constant.towerCost.bulletTower;\n        _this.range = 3 * _constant.gridWidth;\n\n        _this.direction = opt.direction || 0; // 用度数表示的tower指向\n        _this.bulletStartPosVec = _vec2.default.fromValues(0, 0);\n        _this.directionVec = _vec2.default.create();\n        return _this;\n    }\n\n    _createClass(BulletTower, [{\n        key: 'draw',\n        value: function draw() {\n            var ctx = this.ctx;\n\n            // 将方向向量归一化\n            this.directionVec = _vec2.default.fromValues(Math.cos((0, _utils.toRadians)(this.direction)), Math.sin((0, _utils.toRadians)(this.direction)));\n            _vec2.default.normalize(this.directionVec, this.directionVec);\n\n            // bullet 出射位置\n\n            _vec2.default.scale(this.bulletStartPosVec, this.directionVec, 30);\n\n            ctx.save();\n            if (_config.config.renderShadow) {\n                ctx.shadowBlur = this.radius;\n                ctx.shadowColor = 'hsl(' + this.hue + ',100%,60%)';\n            }\n\n            // 在选中的情况下，画出其射程范围\n            if (this.selected) {\n                ctx.beginPath();\n                ctx.fillStyle = \"rgba(200, 200, 200, 0.3)\";\n                ctx.arc(this.x, this.y, this.range, 0, 2 * Math.PI);\n                ctx.fill();\n            }\n\n            ctx.strokeStyle = 'hsl(' + this.hue + ',100%,80%';\n            ctx.fillStyle = 'hsl(' + this.hue + ',100%,80%';\n            ctx.lineWidth = Math.max(3, this.radius / 8);\n\n            ctx.beginPath();\n            ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.stroke();\n            ctx.fill();\n\n            ctx.beginPath();\n            ctx.moveTo(this.x, this.y);\n            ctx.lineTo(this.x + this.bulletStartPosVec[0], this.y + this.bulletStartPosVec[1]);\n            ctx.stroke();\n            ctx.closePath();\n\n            if (this.targetIndex !== -1 && new Date() - this.lastShootTime >= 500) {\n                this.shoot(ctx);\n                this.lastShootTime = new Date();\n            }\n\n            ctx.restore();\n        }\n    }, {\n        key: 'shoot',\n\n\n        // 发射子弹\n        value: function shoot(ctx) {\n            this.bullets.push(new _Bullet2.default({\n                ctx: ctx,\n                x: this.x + this.bulletStartPosVec[0],\n                y: this.y + this.bulletStartPosVec[1],\n                directionVec: this.directionVec\n            }));\n        }\n    }, {\n        key: 'findTarget',\n        value: function findTarget(enemies) {\n            _get(BulletTower.prototype.__proto__ || Object.getPrototypeOf(BulletTower.prototype), 'findTarget', this).call(this, enemies);\n        }\n    }]);\n\n    return BulletTower;\n}(_BaseTower3.default);\n\nexports.default = BulletTower;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Entity/tower/BulletTower.js\n// module id = 12\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n        value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _vec = require('gl-matrix/src/gl-matrix/vec2');\n\nvar _vec2 = _interopRequireDefault(_vec);\n\nvar _utils = require('./../../utils/utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Bullet = function () {\n        function Bullet(_ref) {\n                var ctx = _ref.ctx,\n                    x = _ref.x,\n                    y = _ref.y,\n                    directionVec = _ref.directionVec,\n                    damage = _ref.damage;\n\n                _classCallCheck(this, Bullet);\n\n                this.type = 'line';\n                this.x = x;\n                this.y = y;\n                this.directionVec = directionVec;\n\n                // {vec2} this.start 表示起点位置的向量\n                this.start = _vec2.default.fromValues(x, y);\n\n                this.hue = 200;\n\n                // {vec2} this.velocity 表示bullet速度的向量\n                // 将表示方向的单位向量乘以速率，得到速度向量\n                this.velocity = _vec2.default.create();\n                _vec2.default.scale(this.velocity, directionVec, 2);\n\n                // bullet的长度\n                this.length = 10;\n                // 从bullet的起点指向终点的向量\n                this.bulletVec = _vec2.default.create();\n                _vec2.default.scale(this.bulletVec, directionVec, this.length);\n\n                // {vec2} this.end 表示终点位置的向量\n                this.end = _vec2.default.create();\n                this.end = _vec2.default.add(this.end, this.start, this.bulletVec);\n\n                this.damage = damage || 5;\n        }\n\n        _createClass(Bullet, [{\n                key: 'draw',\n                value: function draw(ctx) {\n                        // bullet运动后的起点和终点位置\n                        _vec2.default.add(this.start, this.start, this.velocity);\n                        _vec2.default.add(this.end, this.end, this.velocity);\n\n                        // 绘图开始\n                        ctx.save();\n                        ctx.strokeStyle = 'hsl(' + this.hue + ', 100%, 80%)';\n                        ctx.beginPath();\n                        ctx.moveTo(this.start[0], this.start[1]);\n                        ctx.lineTo(this.end[0], this.end[1]);\n                        ctx.stroke();\n                        ctx.restore();\n                }\n        }]);\n\n        return Bullet;\n}();\n\nexports.default = Bullet;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Entity/bullet/Bullet.js\n// module id = 13\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constant = require('./../utils/constant');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Enemy = function () {\n    function Enemy(opt) {\n        _classCallCheck(this, Enemy);\n\n        this.id = opt.id;\n        this.ctx = opt.ctx;\n\n        // 用像素表示的当前位置\n        this.x = opt.x;\n        this.y = opt.y;\n\n        // 当前目标点waypoint的index\n        this.wp = 1;\n\n        // 速度在两个方向上的分量\n        this.vx = 0;\n        this.vy = 0;\n\n        this.speed = opt.speed || 2;\n\n        // 当前位置到目标点的距离\n        this.dx = 0;\n        this.dy = 0;\n        this.dist = 0;\n\n        // 需要绘制的半径大小\n        this.radius = opt.radius || 10;\n\n        // 标记是否需要转弯\n        this.angleFlag = 1;\n\n        this.color = opt.color || 0;\n        this.maxHealth = opt.health || 20;\n        this.health = this.maxHealth;\n\n        this.value = opt.value || 50;\n        this.damage = opt.damage || 5;\n    }\n\n    _createClass(Enemy, [{\n        key: 'step',\n        value: function step(_ref) {\n            var path = _ref.path;\n\n            var speed = this.speed;\n            var wp = path[this.wp];\n            this.dx = wp[0] * _constant.gridSize + _constant.gridSize * 0.5 - this.x;\n            this.dy = wp[1] * _constant.gridSize + _constant.gridSize * 0.5 - this.y;\n            this.dist = Math.sqrt(this.dx * this.dx + this.dy * this.dy);\n\n            if (this.angleFlag) {\n                this.angle = Math.atan2(this.dy, this.dx);\n                this.angleFlag = 0;\n            }\n            this.vx = Math.cos(this.angle) * speed;\n            this.vy = Math.sin(this.angle) * speed;\n\n            if (Math.abs(this.dist) > speed) {\n                this.x += this.vx;\n                this.y += this.vy;\n            } else {\n                this.x = (wp[0] + 0.5) * _constant.gridSize;\n                this.y = (wp[1] + 0.5) * _constant.gridSize;\n                if (this.wp + 1 >= path.length) {\n                    // 到达终点\n                    console.log('reach destination');\n                    this.dead = true;\n                    this.reachDest = true;\n                } else {\n                    this.wp++;\n                    this.angleFlag = 1;\n                }\n            }\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            var ctx = this.ctx;\n            ctx.strokeStyle = this.color || '#eee';\n            ctx.lineWidth = 2;\n            ctx.beginPath();\n            ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);\n            ctx.closePath();\n            ctx.stroke();\n\n            this.drawHealth();\n        }\n    }, {\n        key: 'drawHealth',\n        value: function drawHealth() {\n            var ctx = this.ctx;\n            ctx.beginPath();\n            ctx.moveTo(this.x - this.radius, this.y);\n            ctx.lineTo(this.x - this.radius + this.health / this.maxHealth * this.radius * 2, this.y);\n            ctx.stroke();\n        }\n    }]);\n\n    return Enemy;\n}();\n\nexports.default = Enemy;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Entity/Enemy.js\n// module id = 14\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n        value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constant = require('./../utils/constant');\n\nvar _Path = require('./Path');\n\nvar _Path2 = _interopRequireDefault(_Path);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Map = function () {\n        function Map(opt) {\n                _classCallCheck(this, Map);\n\n                this.ctx = opt.ctx;\n                this.newTowerCoord = opt.newTowerCoord || null;\n                this.pathCoord = opt.pathCoord;\n                this.WIDTH = opt.WIDTH, this.HEIGHT = opt.HEIGHT, this.coord = [];\n\n                for (var i = 0; i < _constant.gridNumX; i++) {\n                        this.coord[i] = [];\n                }\n\n                // 初始状态下的塔\n                if (this.newTowerCoord) {\n                        this.coord[this.newTowerCoord[0]][this.newTowerCoord[1]] = 'T';\n                }\n\n                // Create an instance of Path object\n                this.path = new _Path2.default({\n                        ctx: this.ctx,\n                        radius: _constant.gridWidth / 2,\n                        pathCoord: this.pathCoord\n                });\n\n                // Add points to the path\n                this.path.setPoints();\n        }\n\n        _createClass(Map, [{\n                key: 'draw',\n                value: function draw(_ref) {\n                        var towers = _ref.towers,\n                            towerSelect = _ref.towerSelect,\n                            towerSelectIndex = _ref.towerSelectIndex;\n\n                        var ctx = this.ctx;\n                        var WIDTH = this.WIDTH;\n                        var HEIGHT = this.HEIGHT;\n\n                        ctx.save();\n\n                        // Clear canvas\n                        ctx.fillStyle = '#fff';\n                        ctx.fillRect(0, 0, WIDTH, HEIGHT);\n\n                        ctx.strokeStyle = '#eee';\n                        ctx.fillStyle = '#fff';\n                        ctx.lineWidth = 1;\n                        ctx.fillRect(0, 0, WIDTH, HEIGHT);\n                        // 横纵数目相等\n                        var size = 20;\n\n                        ctx.beginPath();\n                        // Draw vertical lines\n                        for (var i = 0; i < size + 1; i++) {\n                                ctx.moveTo(i * _constant.gridWidth, 0);\n                                ctx.lineTo(i * _constant.gridWidth, size * _constant.gridHeight);\n                        }\n                        ctx.stroke();\n\n                        // Draw horizontal lines\n                        for (i = 0; i < size + 1; i++) {\n                                ctx.moveTo(0, i * _constant.gridWidth);\n                                ctx.lineTo(size * _constant.gridWidth, i * _constant.gridWidth);\n                        }\n                        ctx.stroke();\n\n                        // 当前选中的格子突出显示\n                        // TODO: 这一部分移入game.js中\n                        if (towerSelect) {\n                                var coordX = towers[towerSelectIndex].coordX;\n                                var coordY = towers[towerSelectIndex].coordY;\n                                fillGrid(coordX, coordY, 'pink');\n                        }\n\n                        // 给一个格子上色\n                        function fillGrid(x, y, color) {\n                                ctx.fillStyle = color || \"#666\";\n                                ctx.fillRect(x * _constant.gridWidth + 1, y * _constant.gridHeight + 1, _constant.gridWidth - 2, _constant.gridHeight - 2);\n                        }\n\n                        ctx.restore();\n\n                        this.path.draw();\n                }\n        }]);\n\n        return Map;\n}();\n\nexports.default = Map;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Entity/Map.js\n// module id = 15\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Wave = function () {\n    function Wave() {\n        var _this = this;\n\n        var opt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Wave);\n\n        //\n        this.enemyInitCnt = opt.enemyInitCnt || {\n            a: 10,\n            b: 5,\n            c: 10\n        };\n\n        this.enemyCnt = {};\n        Object.keys(this.enemyInitCnt).forEach(function (key) {\n            _this.enemyCnt[key] = _this.enemyInitCnt[key];\n        });\n\n        this.enemyCfg = {\n            a: {\n                radius: 10,\n                speed: 2,\n                color: '#FFDDA0',\n                health: 20\n            },\n            b: {\n                radius: 8,\n                speed: 3,\n                color: '#0280B2',\n                health: 16\n            },\n            c: {\n                radius: 6,\n                speed: 4,\n                color: '#FFD387',\n                health: 12\n            }\n        };\n    }\n\n    _createClass(Wave, [{\n        key: 'waveFinish',\n        value: function waveFinish() {\n            var result = true;\n            var keys = Object.keys(this.enemyCnt);\n\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                if (this.enemyCnt[key] > 0) {\n                    return false;\n                }\n            }\n            return result;\n        }\n    }, {\n        key: 'generateEnemy',\n        value: function generateEnemy() {\n            if (this.waveFinish()) {\n                return -1;\n            } else {\n                var keys = Object.keys(this.enemyCnt);\n                for (var i = 0; i < keys.length; i++) {\n                    var key = keys[i];\n                    if (this.enemyCnt[key] > 0) {\n                        this.enemyCnt[key]--;\n                        return this.enemyCfg[key];\n                    }\n                }\n            }\n        }\n    }]);\n\n    return Wave;\n}();\n\nexports.default = Wave;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Wave.js\n// module id = 16\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _BaseTower = require('./tower/BaseTower');\n\nvar _BaseTower2 = _interopRequireDefault(_BaseTower);\n\nvar _BulletTower = require('./tower/BulletTower');\n\nvar _BulletTower2 = _interopRequireDefault(_BulletTower);\n\nvar _utils = require('./../utils/utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GRID_WIDTH = 60;\nvar GRID_HEIGHT = 60;\nvar GRID_NUM_X = 3;\nvar GRID_NUM_Y = 2;\nvar WIDTH = 230;\nvar HEIGHT = 640;\n\nvar GameControl = function () {\n    function GameControl(opt) {\n        _classCallCheck(this, GameControl);\n\n        this.option = Object.assign({\n            offsetX: 25,\n            offsetY: 25\n        }, opt);\n\n        var element = this.option.element;\n        this.game = opt.game;\n\n        element.width = WIDTH;\n        element.height = HEIGHT;\n\n        this.ctx = element.getContext('2d');\n        this.offsetX = this.option.offsetX;\n        this.offsetY = this.option.offsetY;\n\n        this.towerAreaRect = {\n            x: this.offsetX,\n            y: this.offsetY,\n            width: GRID_NUM_X * GRID_WIDTH,\n            height: GRID_NUM_Y * GRID_HEIGHT\n        };\n\n        this.pauseBtn = {\n            x: this.offsetX,\n            y: 400,\n            width: 100,\n            height: 40,\n            text: 'Pause',\n            status: ''\n        };\n\n        this.sellBtn = {\n            x: this.offsetX,\n            y: 470,\n            width: 100,\n            height: 40,\n            text: 'Sell',\n            status: ''\n        };\n\n        this.towerArea = new TowerArea({\n            ctx: this.ctx,\n            x: this.offsetX,\n            y: this.offsetY\n        });\n\n        this.bindEvent();\n    }\n\n    _createClass(GameControl, [{\n        key: 'draw',\n        value: function draw() {\n            var _this = this;\n\n            var ctx = this.ctx;\n            ctx.fillStyle = '#eee';\n            ctx.fillRect(0, 0, WIDTH, HEIGHT);\n            this.drawGrid();\n\n            if (this.game.mode !== 'ADD_TOWER') {\n                this.towerArea.selected = -1;\n            }\n            this.towerArea.draw();\n            this.drawText();\n            this.drawButton();\n\n            requestAnimationFrame(function () {\n                return _this.draw();\n            }, 100);\n        }\n    }, {\n        key: 'drawGrid',\n        value: function drawGrid() {\n            var ctx = this.ctx;\n            ctx.strokeStyle = '#000';\n            ctx.lineWidth = 3;\n            ctx.beginPath();\n            ctx.moveTo(0, 0);\n            ctx.lineTo(WIDTH, 0);\n            ctx.lineTo(WIDTH, HEIGHT);\n            ctx.lineTo(0, HEIGHT);\n            ctx.closePath();\n            ctx.stroke();\n        }\n    }, {\n        key: 'drawText',\n        value: function drawText() {\n            var ctx = this.ctx;\n            var game = this.game;\n            ctx.fillStyle = '#000';\n            ctx.font = '20px Arial';\n            ctx.fillText('\\u7B2C' + (game.wave + 1) + '\\u6CE2', this.offsetX, 200);\n            ctx.fillText('Life:' + game.life, this.offsetX, 250);\n            ctx.fillText('Score:' + game.score, this.offsetX, 300);\n            ctx.fillText('Money:' + game.money, this.offsetX, 350);\n        }\n    }, {\n        key: 'drawButton',\n        value: function drawButton() {\n            var ctx = this.ctx;\n\n            [this.pauseBtn, this.sellBtn].forEach(function (btn) {\n                if (btn.status === 'hover') {\n                    ctx.strokeStyle = 'red';\n                    ctx.fillStyle = 'red';\n                } else {\n                    ctx.strokeStyle = '#000';\n                    ctx.fillStyle = '#000';\n                }\n                ctx.strokeRect(btn.x, btn.y, btn.width, btn.height);\n                ctx.fillText(btn.text, btn.x + btn.width / 5, btn.y + btn.height / 1.6);\n            });\n        }\n\n        // 在游戏的控制区域绑定事件\n        // TODO: 简化判断事件对应元素的逻辑\n\n    }, {\n        key: 'bindEvent',\n        value: function bindEvent() {\n            var _this2 = this;\n\n            var $element = $(this.option.element);\n            var game = this.game;\n            var x = 0;\n            var y = 0;\n\n            $element.click(function (e) {\n                var $canvas = $(e.target);\n                var game = _this2.game;\n                var offset = $canvas.offset();\n                x = e.clientX - offset.left;\n                y = e.clientY - offset.top;\n\n                // 检查点击位置是否在 tower area 内\n                if ((0, _utils.isInside)({ x: x, y: y }, _this2.towerAreaRect)) {\n                    var xIdx = Math.floor((x - _this2.offsetX) / GRID_WIDTH);\n                    var yIdx = Math.floor((y - _this2.offsetY) / GRID_HEIGHT);\n\n                    // 点击了 BaseTower\n                    if (xIdx === 0 && yIdx === 0) {\n                        if (game.mode === 'ADD_TOWER') {\n                            if (game.addTowerType !== 'BASE') {\n                                game.addTowerType = 'BASE';\n                                _this2.towerArea.selected = [0, 0];\n                            } else {\n                                game.mode = '';\n                                game.addTowerType = '';\n                            }\n                        } else {\n                            game.mode = 'ADD_TOWER';\n                            game.addTowerType = 'BASE';\n                            _this2.towerArea.selected = [0, 0]; // 突出显示\n                        }\n                    } else if (xIdx === 1 && yIdx === 0) {\n                        // 点击了 BulletTower\n                        if (game.mode === 'ADD_TOWER' && game.addTowerType === 'BULLET') {\n                            game.mode = '';\n                            game.addTowerType = '';\n                        } else {\n                            game.mode = 'ADD_TOWER';\n                            game.addTowerType = 'BULLET';\n                            _this2.towerArea.selected = [1, 0];\n                        }\n                    } else {\n                        _this2.towerArea.selected = -1;\n                    }\n                } else {\n                    console.log('out');\n                }\n\n                if ((0, _utils.isInside)({ x: x, y: y }, _this2.pauseBtn)) {\n                    game.status = game.status === 'running' ? 'pause' : 'running';\n                    if (game.status === 'running') {\n                        game.draw();\n                    }\n                }\n\n                if ((0, _utils.isInside)({ x: x, y: y }, _this2.sellBtn)) {\n                    if (game.towerSelect === true) {\n                        console.log('you sell a tower');\n                        game.sellTower();\n                    } else {\n                        // console.log('do nothing');\n                    }\n                }\n            });\n\n            $element.mousemove(function (e) {\n                // e.stopPropagation()\n                var pauseBtn = _this2.pauseBtn;\n                var sellBtn = _this2.sellBtn;\n                var game = _this2.game;\n\n                var $canvas = $(e.target);\n                var offset = $canvas.offset();\n                x = e.clientX - offset.left;\n                y = e.clientY - offset.top;\n\n                // 鼠标hover在暂停按钮上\n                if ((0, _utils.isInside)({ x: x, y: y }, pauseBtn)) {\n                    pauseBtn.status = 'hover';\n                } else {\n                    pauseBtn.status = '';\n                }\n\n                if ((0, _utils.isInside)({ x: x, y: y }, sellBtn)) {\n                    sellBtn.status = 'hover';\n                } else {\n                    sellBtn.status = '';\n                }\n            });\n        }\n    }]);\n\n    return GameControl;\n}();\n\nexports.default = GameControl;\n\nvar TowerArea = function () {\n    function TowerArea(opt) {\n        _classCallCheck(this, TowerArea);\n\n        this.ctx = opt.ctx;\n        this.selected = -1;\n        this.offsetX = opt.x;\n        this.offsetY = opt.y;\n\n        this.baseTower = new _BaseTower2.default({\n            x: this.offsetX + GRID_WIDTH / 2 + 10,\n            y: this.offsetY + GRID_HEIGHT / 2,\n            ctx: this.ctx,\n            radius: 12\n        });\n\n        this.bulletTower = new _BulletTower2.default({\n            x: this.offsetX + GRID_WIDTH * 1.5 + 10,\n            y: this.offsetY + GRID_HEIGHT / 2,\n            ctx: this.ctx,\n            direction: 180,\n            radius: 12\n        });\n    }\n\n    _createClass(TowerArea, [{\n        key: 'draw',\n        value: function draw() {\n            var ctx = this.ctx;\n            ctx.strokeStyle = '#000';\n            ctx.lineWidth = 1;\n            // 横线\n            ctx.beginPath();\n            for (var i = 0; i < GRID_NUM_Y + 1; i++) {\n                ctx.moveTo(this.offsetX, i * GRID_WIDTH + this.offsetY);\n                ctx.lineTo(this.offsetX + GRID_NUM_X * GRID_WIDTH, i * GRID_WIDTH + this.offsetY);\n            }\n            ctx.stroke();\n\n            // 纵线\n            ctx.beginPath();\n            for (var _i = 0; _i < GRID_NUM_X + 1; _i++) {\n                ctx.moveTo(_i * GRID_WIDTH + this.offsetX, this.offsetY);\n                ctx.lineTo(_i * GRID_WIDTH + this.offsetX, this.offsetY + GRID_NUM_Y * GRID_HEIGHT);\n            }\n            ctx.stroke();\n\n            if (this.selected !== -1) this.highlightTower(this.selected[0], this.selected[1]);\n            this.baseTower.draw(ctx);\n            this.bulletTower.draw(ctx);\n        }\n\n        // 选中的tower突出显示\n\n    }, {\n        key: 'highlightTower',\n        value: function highlightTower(x, y) {\n            var ctx = this.ctx;\n            ctx.strokeStyle = 'pink';\n            ctx.lineWidth = 3;\n            ctx.beginPath();\n            ctx.moveTo(x * GRID_WIDTH + this.offsetX + 3, y * GRID_HEIGHT + this.offsetY + 3);\n            ctx.lineTo((x + 0.35) * GRID_WIDTH + this.offsetX + 3, y * GRID_HEIGHT + this.offsetY + 3);\n\n            ctx.moveTo((x + 0.65) * GRID_WIDTH + this.offsetX, y * GRID_HEIGHT + this.offsetY + 3);\n            ctx.lineTo((x + 1) * GRID_WIDTH + this.offsetX - 3, y * GRID_HEIGHT + this.offsetY + 3);\n            ctx.lineTo((x + 1) * GRID_WIDTH + this.offsetX - 3, (y + 0.35) * GRID_HEIGHT + this.offsetY);\n\n            ctx.moveTo((x + 1) * GRID_WIDTH + this.offsetX - 3, (y + 0.65) * GRID_HEIGHT + this.offsetY - 3);\n            ctx.lineTo((x + 1) * GRID_WIDTH + this.offsetX - 3, (y + 1) * GRID_HEIGHT + this.offsetY - 3);\n            ctx.lineTo((x + 0.65) * GRID_WIDTH + this.offsetX, (y + 1) * GRID_HEIGHT + this.offsetY - 3);\n\n            ctx.moveTo((x + 0.35) * GRID_WIDTH + this.offsetX, (y + 1) * GRID_HEIGHT + this.offsetY - 3);\n            ctx.lineTo(x * GRID_WIDTH + this.offsetX + 3, (y + 1) * GRID_HEIGHT + this.offsetY - 3);\n            ctx.lineTo(x * GRID_WIDTH + this.offsetX + 3, (y + 0.65) * GRID_HEIGHT + this.offsetY - 3);\n\n            ctx.moveTo(x * GRID_WIDTH + this.offsetX + 3, (y + 0.35) * GRID_HEIGHT + this.offsetY);\n            ctx.lineTo(x * GRID_WIDTH + this.offsetX + 3, y * GRID_HEIGHT + this.offsetY + 3);\n\n            ctx.closePath();\n            ctx.stroke();\n        }\n    }]);\n\n    return TowerArea;\n}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/Entity/GameControl.js\n// module id = 17\n// module chunks = 0"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACrYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACtIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AC7GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;","sourceRoot":""}